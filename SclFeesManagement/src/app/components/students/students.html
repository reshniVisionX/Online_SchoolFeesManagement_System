<div class="students-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-icon">👥</div>
      <div class="header-text">
        <h1>Student Directory</h1>
        <p>Manage and view all student information</p>
      </div>
      <div class="header-stats">
        <div class="stat-item">
          <span class="stat-number">{{ students().length }}</span>
          <span class="stat-label">Total Students</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Advanced Search & Filters -->
  <div class="search-section">
    <div class="search-header">
      <h3>🔍 Search & Filter Students</h3>
    </div>
    <div class="search-grid">
      <div class="search-group">
        <label class="search-label">Student Name</label>
        <input
          type="text"
          class="search-input"
          placeholder="Enter student name..."
          [(ngModel)]="searchName"
          (input)="onSearchInput()"
        />
      </div>

      <div class="search-group">
        <label class="search-label">Admission ID</label>
        <input
          type="text"
          class="search-input"
          placeholder="Enter admission ID..."
          [(ngModel)]="searchAid"
          (input)="onSearchInput()"
        />
      </div>

      <div class="search-group">
        <label class="search-label">Status</label>
        <select class="search-select" [(ngModel)]="selectedActive" (change)="onSearchInput()">
          <option [ngValue]="null">All Status</option>
          <option [ngValue]="true">✅ Active</option>
          <option [ngValue]="false">❌ Inactive</option>
        </select>
      </div>

      <div class="search-group">
        <label class="search-label">Category</label>
        <select class="search-select" [(ngModel)]="selectedCategory" (change)="onSearchInput()">
          <option [ngValue]="null">All Categories</option>
          <option [ngValue]="0">🏠 Day Scholar</option>
          <option [ngValue]="1">🏨 Hostel</option>
        </select>
      </div>

      <div class="search-group">
        <label class="search-label">Blood Group</label>
        <select class="search-select" [(ngModel)]="selectedBloodGroup" (change)="onSearchInput()">
          <option [ngValue]="null">All Blood Groups</option>
          <option value="A+">A+</option>
          <option value="A-">A-</option>
          <option value="B+">B+</option>
          <option value="B-">B-</option>
          <option value="O+">O+</option>
          <option value="O-">O-</option>
          <option value="AB+">AB+</option>
          <option value="AB-">AB-</option>
        </select>
      </div>

      <div class="search-group">
        <label class="search-label">Date of Birth</label>
        <input
          type="date"
          class="search-input"
          [(ngModel)]="selectedDob"
          (change)="onSearchInput()"
        />
      </div>
    </div>

    <div class="action-buttons">
      <button type="button" class="action-btn primary" (click)="insertStudents()">
        <span class="btn-icon">➕</span>
        <span>Add Student</span>
      </button>
      <button type="button" class="action-btn secondary" (click)="getFeeDetails()">
        <span class="btn-icon">💰</span>
        <span>Fee Details</span>
      </button>
    </div>
  </div>

  <!-- Students Grid -->
  <div class="students-grid" *ngIf="students().length > 0">
    <div class="student-card" *ngFor="let s of students()" (click)="fetchStudentDetails(s.sId)">
      <div class="card-header">
        <div class="student-avatar">
          <span>{{ s.sName?.charAt(0) }}</span>
        </div>
        <div class="student-status" [class]="s.studentDetails?.isActive ? 'active' : 'inactive'">
          {{ s.studentDetails?.isActive ? '✅' : '❌' }}
        </div>
      </div>
      
      <div class="card-body">
        <h3 class="student-name">{{ s.sName }}</h3>
        
        <div class="student-info">
          <div class="info-item">
            <span class="info-icon">🆔</span>
            <span class="info-text">{{ s.admissionId }}</span>
          </div>
          
          <div class="info-item">
            <span class="info-icon">📅</span>
            <span class="info-text">{{ s.dob | date:'mediumDate' }}</span>
          </div>
          
          <div class="info-item" *ngIf="s.bloodGrp">
            <span class="info-icon">🩸</span>
            <span class="info-text">{{ s.bloodGrp }}</span>
          </div>
          
          <div class="info-item" *ngIf="s.studentDetails">
            <span class="info-icon">🏠</span>
            <span class="info-text">{{ s.studentDetails.category === 1 ? 'Hostel' : 'Day Scholar' }}</span>
          </div>
        </div>
        
        <div class="card-badges">
          <span class="badge" [class]="s.studentDetails?.isActive ? 'active' : 'inactive'">
            {{ s.studentDetails?.isActive ? 'Active' : 'Inactive' }}
          </span>
          <span class="badge category" *ngIf="s.studentDetails">
            {{ s.studentDetails.category === 1 ? 'Hostel' : 'Day Scholar' }}
          </span>
        </div>
      </div>
      
      <div class="card-footer">
        <span class="view-details">👁️ View Details</span>
      </div>
    </div>
  </div>

  <!-- No Students Found -->
  <div class="no-students" *ngIf="students().length === 0">
    <div class="no-students-icon">👥</div>
    <h3>No Students Found</h3>
    <p>Try adjusting your search criteria or add new students to get started.</p>
    <button type="button" class="action-btn primary" (click)="insertStudents()">
      <span class="btn-icon">➕</span>
      <span>Add First Student</span>
    </button>
  </div>
</div>